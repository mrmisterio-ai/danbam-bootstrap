---
name: dev-standards
description: 단밤 개발팀 필수 개발 표준. 모든 작업에서 반드시 따라야 함.
---

# 단밤 개발 표준

## 1. 테스트 필수
- **모든 컴포넌트/페이지**에 대해 기본 렌더링 테스트를 작성한다.
- API 연동 코드는 mock 테스트를 포함한다.
- **`npm run build`가 실패하면 절대 커밋하지 않는다.**
- TypeScript 에러가 0개여야 커밋 가능하다.

## 2. API 스펙 준수
- 매니저(조이서)가 전달한 API 스키마의 **필드명을 정확히** 사용한다.
- 타입 정의(`types/index.ts`)가 실제 API 응답과 일치해야 한다.
- API 응답 구조가 불확실하면 **작업 전에** 매니저에게 확인한다.
- `.env` 파일에 localhost를 하드코딩하지 않는다. 상대 경로(`/api`)를 기본으로 한다.

## 3. 코드 품질
- TypeScript strict 모드를 사용한다.
- `any` 타입 사용을 최소화한다.
- 에러 핸들링: API 실패 시 사용자에게 에러 메시지를 보여준다.
- 로딩 상태와 빈 상태(Empty State)를 처리한다.

## 4. 빌드 & 배포
- 빌드 결과물을 `/home/ubuntu/projects/backend/public/`에 복사한다.
- 빌드 전 `npx tsc --noEmit`으로 타입 체크한다.
- `.env`에 배포 환경용 값을 넣는다 (localhost 금지).

## 5. Git 규칙
- 커밋 전 반드시: `npx tsc --noEmit && npm run build`
- 커밋 메시지 컨벤션: feat/fix/refactor/docs/chore
- 빌드 깨진 상태로 커밋하지 않는다.

## 6. 백엔드 연동 시
- API 응답의 실제 필드명을 확인한 후 타입을 정의한다.
- 타입 정의와 실제 API 응답이 불일치하면 매니저에게 보고한다.

## TDD (Test-Driven Development) — 필수

### 원칙
**테스트 먼저, 코드 나중.** 사장님 지시.

### 프로세스
1. **Red**: 실패하는 테스트 먼저 작성
2. **Green**: 테스트를 통과하는 최소한의 코드 작성
3. **Refactor**: 코드 정리, 테스트는 계속 통과

### 규칙
- 새 기능/엔드포인트 추가 시 → 테스트 파일 먼저 생성
- 테스트 없는 코드는 커밋 금지
- 커밋 전 `npm test` 전부 통과 확인
- AC에 반드시 테스트 관련 항목 포함

### 테스트 파일 컨벤션
- 백엔드: `*.spec.ts` (NestJS 기본)
- 프론트엔드: `*.test.tsx` / `*.test.ts`
- 위치: 테스트 대상 파일 옆 (co-location)

### 최소 커버리지
- 핵심 비즈니스 로직: 80% 이상
- API 엔드포인트: 모든 성공/실패 케이스
- 유틸 함수: 100%

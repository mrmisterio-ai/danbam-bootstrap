---
name: dev-standards
description: 단밤 개발팀 필수 개발 표준. 모든 작업에서 반드시 따라야 함.
---

# 단밤 개발 표준

## 1. 테스트 필수
- **모든 API 엔드포인트**에 대해 테스트 코드를 작성한다.
- 테스트는 `node:test` 또는 `jest`를 사용한다.
- **테스트가 통과하지 않으면 절대 커밋하지 않는다.**
- 테스트 항목: 정상 응답, 에러 케이스, 입력 검증, 엣지 케이스

## 2. API 스펙 준수
- 매니저(조이서)가 전달한 API 스키마를 **정확히** 따른다.
- 필드명, 타입, 응답 구조를 임의로 변경하지 않는다.
- 스키마가 모호하면 **작업 전에** 매니저에게 확인한다.
- 응답 예시를 포함한 간단한 API 문서를 README 또는 주석으로 남긴다.

## 3. 코드 품질
- ESLint/Prettier 규칙을 따른다.
- 에러 핸들링을 빠짐없이 한다 (try-catch, 적절한 HTTP 상태 코드).
- 하드코딩 금지 — 환경변수 또는 설정 파일을 사용한다.
- 주석은 "왜"를 설명할 때만 쓴다.

## 4. Git 규칙
- 커밋 전 반드시 테스트 실행: `npm test`
- 커밋 메시지 컨벤션: feat/fix/refactor/docs/chore
- 빌드 깨진 상태로 커밋하지 않는다.

## 5. 프론트엔드 연동 시
- API 응답 스키마를 **반드시** 매니저에게 보고한다.
- 프론트엔드 개발자와 필드명이 일치하는지 확인한다.
- 변경 시 매니저에게 알린다.

## TDD (Test-Driven Development) — 필수

### 원칙
**테스트 먼저, 코드 나중.** 사장님 지시.

### 프로세스
1. **Red**: 실패하는 테스트 먼저 작성
2. **Green**: 테스트를 통과하는 최소한의 코드 작성
3. **Refactor**: 코드 정리, 테스트는 계속 통과

### 규칙
- 새 기능/엔드포인트 추가 시 → 테스트 파일 먼저 생성
- 테스트 없는 코드는 커밋 금지
- 커밋 전 `npm test` 전부 통과 확인
- AC에 반드시 테스트 관련 항목 포함

### 테스트 파일 컨벤션
- 백엔드: `*.spec.ts` (NestJS 기본)
- 프론트엔드: `*.test.tsx` / `*.test.ts`
- 위치: 테스트 대상 파일 옆 (co-location)

### 최소 커버리지
- 핵심 비즈니스 로직: 80% 이상
- API 엔드포인트: 모든 성공/실패 케이스
- 유틸 함수: 100%
